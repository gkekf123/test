<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 렉시컬 스코프 - 함수의 선언위치에 따라서 사용하는 변수가 달라진다
      /*
      방법 1
      var a = 1;
      function func1() {
        a = 10;
        console.log(a); // 10
      }
      func1();
      */

      /*
      방법 2
      var b = 1;
      function func2() {
        var b = 10;
        func3();
      }
      function func3() {
        console.log(b); // 1
      }
      func2();
      */

      /*
      var c = 1;
      function func4() {
        var c = 10;

        func5();
        function func5() {
          console.log(c); // 10
        }
      }
      func4();
      */

      // 클로저 - 내부함수의 렉시컬 스코프를 이용해서 외부에서 변수 a를 접근할 수 있는 환경을 만듦
      function func6() {
        var a = 1;

        /*
        var x = function () {
          return a;
        };
        return x;
        */

        // 위 아래 같다
        return function () {
          return a;
        };
      } // a 수명은 여기서 끝
      var result = func6(); // func6()반환은 함수
      // console.log(result); // 함수
      var result2 = result();
      console.log(result2); // a값

      console.log("~~~~~~~~~~~~~~~~~~~~~~~");

      // var count = 0;
      // ++count;
      // count = "홍길동";
      // ++count;
      // console.log(count);

      // 위 코드를 정상적으로..
      var computer = function () {
        var count = 0; // 전역변수로 사용
        return function () {
          return ++count;
        }; // getter함수에 사용
      };
      // console.log(computer());
      // console.log(computer());
      // console.log(computer());
      // console.log(computer()); // 1

      var x = computer();

      console.log(x());
      console.log(x());
      console.log(x());
      console.log(x()); // 계속 누적..
    </script>
  </body>
</html>
